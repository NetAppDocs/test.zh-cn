---
sidebar: sidebar 
permalink: task_create_monitor.html 
keywords: monitors, alerts, log, metric, system-defined, system, metric, 
summary: 创建监控器，以便针对性能或清单阈值以及指标或日志条件发出警报。 
---
= 向监控器发出警报


[role="lead"]
您可以创建监控器来设置触发警报的阈值，以便向您通知与网络中资源相关的问题。例如，您可以创建一个监控器，以便针对任意多种协议发出 _node write latency 警报。


TIP: Cloud Insights 标准版及更高版本提供了监控和警报功能。

达到或超过受监控的阈值和条件时， Cloud Insights 将创建警报。一个监控器可以具有 _Warning_ 阈值， _critical_ 阈值，也可以同时具有这两者。

您可以使用监控器为 " 基础架构 " 对象（例如存储， VM ， EC2 和端口）以及 " 集成 " 数据（例如为 Kubernetes ， ONTAP 高级指标和 Telegraf 插件收集的数据）设置阈值。监控超过阈值时向您发出的警报，您可以设置警告级别警报，严重级别警报或两者的阈值。

请参见下面的 link:#system-defined-monitors["系统定义的监控器"] 文档。



== 创建监控器

. 从 Cloud Insights 菜单中，单击 * 警报 > 管理监控器 *
+
此时将显示监控器列表页面，其中显示了当前配置的监控器。

. 要修改现有监控器，请单击列表中的监控器名称。
. 要添加监控器，请单击 * + Monitor* 。
+
image:Monitor_log_or_metric.png["选择系统或日志监控器"]

+
添加新监控器时，系统会提示您创建指标监控器或日志监控器。

+
** _Metric _ 监控与基础架构或性能相关的触发器的警报
** _Log_ 监控日志相关活动的警报


+
选择监控器类型后，将显示监控器配置对话框。





==== 指标监控器

. 在下拉列表中，搜索并选择要监控的对象类型和指标。


您可以设置筛选器以缩小要监控的对象属性或指标范围。

image:MonitorMetricFilter.png["指标筛选"]

使用集成数据（ Kubernetes ， ONTAP 高级数据等）时，指标筛选会从绘制的数据系列中删除单个 / 不匹配的数据点，而不像基础架构数据（存储， VM ，端口等）那样，基础架构数据（存储， VM ，端口等）中的筛选器会处理数据系列的聚合值，并可能从图表中删除整个对象。


TIP: 要创建多条件监控器（例如， IOPS > X 和延迟 > Y ），请将第一个条件定义为阈值，将第二个条件定义为筛选器。



===== 定义监控器的条件。

. 选择要监控的对象和指标后，设置警告级别和 / 或严重级别阈值。
. 对于 _Warning_ 级别，为我们的示例输入 200 。指示此警告级别的虚线显示在示例图中。
. 对于 _critical_ 级别，输入 400 。指示此严重级别的虚线显示在示例图中。
+
此图显示历史数据。图中的 " 警告 " 和 " 严重 " 级别行是监控器的可视表示，因此您可以轻松查看监控器在每种情况下何时可能触发警报。

. 对于发生时间间隔，请选择 _continuous_ ，持续时间为 _15 分钟。
+
您可以选择在违反阈值时触发警报，或者等待阈值在一段时间内持续违反。在我们的示例中，我们不希望在总 IOPS 峰值高于 " 警告 " 或 " 严重 " 级别时都收到警报，但仅当受监控对象持续超过其中一个级别至少 15 分钟时才会收到警报。

+
image:Monitor_metric_conditions.png["定义监控器的条件"]





=== 日志监控器

创建 * 日志监控器 * 时，首先从可用日志列表中选择要监控的日志。然后，您可以根据上述可用属性进行筛选。

例如，您可以选择筛选 logs.netapp.ems 源中的 "object.store.unavailable" 消息类型：


NOTE: 日志监控器筛选器不能为空。

image:Monitor_log_monitor_filter.png["选择要监控的日志并设置筛选器"]



==== 定义警报行为

选择在触发日志警报时要发出警报的方式。您可以根据上述筛选条件将监控器设置为具有 _Warning_ ， _critical_ 或 _Informational_ 严重性的警报。

image:Monitor_log_alert_behavior.png["定义要监控的日志行为"]



==== 定义警报解析行为

您可以选择如何解决日志监控警报。您可以选择三种方式：

* * 立即解决 * ：立即解决警报，无需采取进一步操作
* * 基于时间解决 * ：在指定时间过后，警报将得到解决
* * 基于日志条目解决 * ：在发生后续日志活动时解决警报。例如，当对象记录为 " 可用 " 时。


image:Monitor_log_monitor_resolution.png["警报解决"]



==== 选择通知类型和收件人

在 _set up team notification （ s ） _ 部分中，您可以选择是通过电子邮件还是 Webhook 向您的团队发出警报。

image:Webhook_Choose_Monitor_Notification.png["选择警报方法"]

* 通过电子邮件警报： *

指定警报通知的电子邮件收件人。如果需要，您可以为警告或严重警报选择不同的收件人。

image:email_monitor_alerts.png["通过电子邮件发送警报收件人"]

* 通过 Webhook 警报： *

指定警报通知的 webhook 。如果需要，您可以为警告或严重警报选择不同的网络挂钩。

image:Webhook_Monitor_Notifications.png["webhook 警报"]



==== 设置更正操作或追加信息

您可以通过填写 * 添加警报问题描述 * 部分来添加可选的问题描述以及其他见解和 / 或更正操作。问题描述最多可以包含 1024 个字符，并将随警报一起发送。洞察力 / 更正操作字段最多可包含 67 ， 000 个字符，并将显示在警报登录页面的摘要部分中。

在这些字段中，您可以提供注释，链接或更正警报或以其他方式解决警报的步骤。

image:Monitors_Alert_Description.png["警报更正操作和问题描述"]



==== 保存您的显示器

. 如果需要，您可以添加监控器的问题描述。
. 为 Monitor 指定一个有意义的名称，然后单击 * 保存 * 。
+
新的监控器将添加到活动监控器列表中。





==== 监控列表

" 监控 " 页面列出了当前配置的监控器，显示以下内容：

* 监控器名称
* Status
* 正在监控的对象 / 指标
* 监控器的条件


您可以通过单击显示器右侧的菜单并选择 * 暂停 * 来选择临时暂停对某个对象类型的监控。准备好恢复监控后，单击 * 恢复 * 。

您可以从菜单中选择 * 复制 * 来复制监控器。然后，您可以修改新的监控器并更改对象 / 指标，筛选器，条件，电子邮件收件人等

如果不再需要显示器，您可以从菜单中选择 * 删除 * 来将其删除。

默认情况下会显示两个组：

* 所有显示器 * 列出所有显示器。
* * 自定义监控 * 仅列出用户创建的监控器。


默认情况下会显示两个组：

* 所有显示器 * 列出所有显示器。
* * 自定义监控 * 仅列出用户创建的监控器。




== 系统定义的监控器

查看 link:task_system_monitors.html["系统定义的监控器"] 第页，介绍 Cloud Insights 随附的监控器。



=== 更多信息

* link:task_view_and_manage_alerts.html["查看和忽略警报"]

