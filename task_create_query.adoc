---
sidebar: sidebar 
permalink: task_create_query.html 
summary: 通过查询，您可以快速轻松地识别感兴趣的资产和指标。 
keywords: query, queries 
---
= 创建查询
:allow-uri-read: 


[role="lead"]
通过查询，您可以精细地搜索环境中的资产，从而筛选所需数据并按您的喜好对结果进行排序。

例如，您可以为 _volumes_ 创建一个查询，添加一个筛选器以查找与选定卷关联的特定 _storage_ ，添加另一个筛选器以查找选定存储上的特定 _annotation_such as "Tier 1" ， 最后，添加另一个筛选器以查找 _IOPS - 读取（ IO/s ） _ 大于 25 的所有存储。显示结果后，您可以按升序或降序对与查询关联的信息列进行排序。

注意：如果添加了新的数据收集器以获取资产，或者进行了任何标注或应用程序分配，则只能在查询编制索引后查询这些新资产，标注或应用程序。索引编制会按定期计划的时间间隔进行，或者在运行标注规则等特定事件期间进行。

.创建查询非常简单：
. 导航到 * 查询 > * + 新建查询 * 。
. 从 " 选择 ..." 列表中，选择要查询的对象类型。您可以滚动浏览此列表，也可以开始键入以更快地找到要搜索的内容。


.滚动列表：
image:QueryDrop-DownList.png["查询下拉列表"]

.类型搜索：
image:QueryPageFilter.png["键入以查找"]

您可以通过单击 * 筛选依据 * 字段中的 * + * 按钮来添加筛选器以进一步缩小查询范围。按对象或属性对行进行分组。使用集成数据（ Kubernetes ， ONTAP 高级指标等）时，您可以根据需要按多个属性进行分组。

image:QueryFilterExample.png["查询筛选和分组"]

查询结果列表会显示许多默认列，具体取决于搜索的对象类型。要添加，删除或更改列，请单击表右侧的齿轮图标。可用列会根据资产 / 指标类型而变化。

image:QuerySelectColumns.png["选择 Columns"]

配置查询以显示所需结果后，您可以单击 * 保存 * 按钮保存此查询以供将来使用。请为其指定一个有意义且唯一的名称。



=== 有关筛选的更多信息



==== 通配符和表达式

在查询或信息板小工具中筛选文本或列表值时，在开始键入时，系统会显示一个选项，用于根据当前文本创建 * 通配符筛选器 * 。选择此选项将返回与通配符表达式匹配的所有结果。您也可以使用 NOT 或 OR 创建 * 表达式 * ，也可以选择 " 无 " 选项来筛选字段中的空值。

image:Type-Ahead-Example-ingest.png["通配符筛选器"]

基于通配符或表达式（例如 NOT ， OR ， "None" 等）在筛选器字段中显示为深蓝色。您直接从列表中选择的项目将以淡蓝色显示。

image:Type-Ahead-Example-Wildcard-DirectSelect.png["通配符筛选器结果"]

请注意，通配符和表达式筛选适用于文本或列表，但不适用于数值，日期或布尔值。



==== 细化筛选器

您可以使用以下内容来细化筛选器：

|===


| 筛选器 | 功能 | 示例 | 结果 


| * （星号） | 用于搜索所有内容 | 卷 * RHEL | 返回以 "vol" 开头，以 "rhel" 结尾的所有资源 


| ？（问号） | 用于搜索特定数量的字符 | BOS-PRD ？？ -S12 | 返回 BOS-PRD* ， _12_**-S12 ， BOS-PRD* ， _23__**-S12 等 


| 或 | 用于指定多个实体 | FAS2240 ， CX600 或 FAS3270 | 返回任何 FAS2440 ， CX600 或 FAS3270 


| 不是 | 用于从搜索结果中排除文本 | 不是 EMC* | 返回不以 "EMC" 开头的所有内容 


| 无 _ | 在所有字段中搜索空值 | 无 _ | 返回目标字段为空的结果 


| 不是 * | 在 _text-only_ 字段中搜索空值 | 不是 * | 返回目标字段为空的结果 
|===
如果将筛选器字符串用双引号括起来， Insight 会将第一个和最后一个报价之间的所有内容视为完全匹配。引号中的任何特殊字符或运算符将被视为文字。例如，筛选 "*" 将返回文字星号结果；在这种情况下，星号不会视为通配符。如果用双引号括起来，则运算符或和 NOT 也会被视为文字字符串。



=== 既然我有查询结果，我该怎么办？

查询提供了一个简单的位置，用于向资产添加标注或分配应用程序。请注意，您只能为清单资产（磁盘，存储等）分配应用程序或标注。集成指标不能用于标注或应用程序分配。

要将标注或应用程序分配给查询所产生的资产，请使用结果表左侧的复选框列选择资产，然后单击右侧的 * 批量操作 * 按钮。选择要应用于选定资产的所需操作。

image:QueryVolumeBulkActions.png["查询批量操作示例"]



=== 标注规则需要查询

如果要配置 link:task_create_annotation_rules.html["标注规则"]，每个规则都必须有一个底层查询才能使用。但是，如上所述，可以根据需要进行广泛或缩小范围的查询。
